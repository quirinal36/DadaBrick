<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user_sql">
	<insert id="insert" parameterType="user">
		INSERT INTO users
		(
			user_role,
			login,
			password,
			username,
			phone,
			email,
			classification,
			level,
			address
		)
		VALUES
		(
			${user_role},
			'${login}',
			'${password}',
			'${username}',
			'${phone}',
			'${email}',
			'${classification}',
			'${level}',
			'${address}'
		)
		
	</insert> 
	<select id="select" parameterType="user" resultType="user">
		SELECT * FROM users
		<where>
		login = '${login}'
		</where>
	</select>
	<select id="select_one" parameterType="user" resultType="user">
		SELECT u.*, r.role_name FROM 
		users u 
			LEFT JOIN roles r on (u.user_role = r.id)
		<where>
		login = '${login}'
		</where>
	</select>
</mapper>